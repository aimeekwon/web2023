<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>달력</title>

    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/MAIN/footer.css">
    <link rel="stylesheet" href="../assets/css/BOARD/board.css">
    <link rel="stylesheet" href="../assets/css/NAV/calendar.css">

    <!-- fullcalendar CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.css">

    <!-- SCRIPT -->
    <script defer src="assets/js/common.js"></script>
    <style>

    </style>
</head>

<body class="bgStyle3">

    <div id="skip">
        <a href="#header">헤더 영역 바로가기</a>
        <a href="#main">컨텐츠 영역 바로가기</a>
        <a href="#footer">푸터 영역 바로가기</a>
    </div>
    <!-- //skip -->

    <header id="header">
        <h2 class="blind">헤더 영역</h2>
        <div class="container">
            <div class="header__inner bmStyle">
                <div class="left">
                    <h1 class="logo"> <a href="/php2/html/main.html">PLANTY</a></h1>
                </div>
                <nav class="nav__inner">
                    <ul>
                        <li><a href="#">PLANTY</a></li>
                        <li><a href="#">식물 사전</a></li>
                        <li><a href="#">캘린더</a></li>
                        <li><a href="#">커뮤니티</a></li>
                        <li><a href="#">고객센터</a></li>
                    </ul>
                </nav>
                <div class="right">
                    <ul>
                        <li><a href="/php2/html/LOGIN/login.html">Sign in</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
    <!-- //header -->

    <main id="main" class="container bmStyle">
        <div class="calendal__header">
            <h5>CALENDAR</h5>
            <h2>2023</h2>
        </div>
        <!-- //intro__inner -->
        <div class="calendal__inner">

            <div id='calendar'></div>

            <div id="myModal" class="modal">
                <span class="close">&times;</span>
                <div class="modal__inner">
                    <div class="modal-content1">
                        <img src="../assets/img/COMMUNITY/community_img01.png" alt="">
                    </div>
                    <div class="modal-content2">
                        <h2>내 식물정보</h2>
                        <div class="cont2__inner">
                            <h1>투투키</h1>
                            <h3>처음 데려온 날</h3>
                            <p>2021년 2월 22일</p>

                            <h3>마지막 분갈이 날</h3>
                            <p>2021년 5월 1일</p>

                            <h3>마지막 물준 날</h3>
                            <p>2021년 5월 1일</p>

                        </div>
                        <h2>내 식물 관리노트</h2>
                        <form id="eventForm">
                            <label for="eventTitle">식물명</label>
                            <input type="text" id="eventTitle" name="eventTitle">

                            <input type="submit" value="저장하기" class="save" id="saveButton">
                        </form>

                    </div>



                </div>
            </div>

        </div>


        <!-- </div> -->
    </main>
    <!-- //main -->


    <footer id="footer">
        <h2 class="blind">푸터 영역</h2>
        <div class="footer__inner">
            <div class="f_logo">
                <span><a href="#">PLANTY</a></span>
            </div>
            <nav>
                <ul>
                    <li><a href="#">PLANTY
                            <ul>
                                <li><a href="#">브랜드철학</a></li>
                                <li><a href="#">핵심가치</a></li>
                            </ul>

                        </a></li>
                    <li><a href="#">식물사전
                            <ul>
                                <li><a href="#">식물관리정보</a></li>
                                <li><a href="#">식물소개</a></li>
                                <li><a href="#">식물검색</a></li>
                            </ul>
                        </a></li>
                    <li><a href="#">캘린더
                            <ul>
                                <li><a href="#">이달의 식물</a></li>
                                <li><a href="#">내식물</a></li>
                            </ul>

                        </a></li>
                    <li><a href="#">커뮤니티
                            <ul>
                                <li><a href="#">플랜테리어</a></li>
                                <li><a href="#">내 식물 공유</a></li>
                            </ul>
                        </a></li>
                    <li><a href="#">고객센터
                            <ul>
                                <li><a href="#">문의사항</a></li>
                                <li><a href="#">이벤트</a></li>
                                <li><a href="#">공지사항</a></li>
                                <li><a href="#">F&Q</a></li>
                            </ul>
                        </a></li>

                </ul>
            </nav>

        </div>
        <div class="copyright">
            2023 PLANTY<br>Copyright ⓒAll Rights Reserved.
        </div>
    </footer>
    <!-- //footer -->
    <script src="../assets/js/NAV/calendar.js"></script>
    <!-- fullcalendar JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <!-- fullcalendar locale script -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/locales-all.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                // ...existing configuration...

                eventClick: function (info) {
                    // Handle event click here
                    console.log('Event clicked:', info.event);

                    var modal = document.getElementById("myModal");
                    modal.style.display = "block";
                    var eventForm = document.getElementById("eventForm");
                    var titleInput = document.getElementById("eventTitle");
                    var saveButton = document.getElementById("saveButton"); // Get the save button by its id

                    titleInput.value = info.event.title;

                    eventForm.onsubmit = function (event) {
                        event.preventDefault();
                        var title = titleInput.value.trim();
                        if (title) {
                            info.event.setProp("title", title);
                            calendar.updateEvent(info.event);
                            saveEventToLocalStorage(info.event); // Save the event to local storage
                        }
                        titleInput.value = "";
                        modal.style.display = "none";
                    };

                    saveButton.addEventListener("click", function () {
                        eventForm.submit();
                    });
                },

                // ...existing configuration...
            });

            // Load saved events
            var savedEvents = getEventsFromLocalStorage() || [];
            calendar.addEventSource(savedEvents);

            // ...existing code...

            // Save the event to local storage
            function saveEventToLocalStorage(event) {
                var savedEvents = getEventsFromLocalStorage() || [];
                var existingEventIndex = savedEvents.findIndex(function (savedEvent) {
                    return savedEvent.id === event.id;
                });

                if (existingEventIndex !== -1) {
                    savedEvents[existingEventIndex] = event.toPlainObject();
                } else {
                    savedEvents.push(event.toPlainObject());
                }

                localStorage.setItem("savedEvents", JSON.stringify(savedEvents));
            }

            // Get events from local storage
            function getEventsFromLocalStorage() {
                var savedEvents = localStorage.getItem("savedEvents");
                if (savedEvents) {
                    return JSON.parse(savedEvents);
                }
                return null;
            }
        });
    </script>
</body>

</html>